<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>⭐DHT⭐カウンター</title>

  <link rel="stylesheet" href="./css/style.css?v=29" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <header class="header">
    <noscript>
      <div class="noscript">
        JavaScript が無効です（noscript表示）
      </div>
    </noscript>

    <h1 class="title">⭐DHT⭐カウンター</h1>
    <div id="meta" class="meta"></div>
  </header>

  <nav class="tabs" role="tablist" aria-label="tabs">
    <button class="tab active" data-tab="t1" role="tab">Fig Since 2026</button>
    <button class="tab" data-tab="t2" role="tab">Graph Since 2026</button>
    <button class="tab" data-tab="t3" role="tab">③</button>
    <button class="tab" data-tab="t4" role="tab">④</button>
  </nav>

  <main class="content">
    <!-- Tab 1 -->
    <section id="t1" class="panel active" role="tabpanel">
      <div class="card">
        <!-- ここが肝：カード内を grid で固定配置 -->
        <div class="fig-grid">
          <!-- Big number -->
          <div class="big-number">
            <span id="leftValue">–</span>
            <span class="dash"> − </span>
            <span id="rightValue">–</span>
          </div>

          <!-- Two note blocks (must be under number, left/right fixed) -->
          <div class="note note-left">
            ↑ Cさんに<br>
            <span class="dht">⭐DHT⭐</span>と<br>
            言われた回数
          </div>

          <div class="note note-right">
            ↑ 他の人に<br>
            <span class="dht">⭐DHT⭐</span>と<br>
            言われた回数
          </div>

          <!-- small counts line -->
          <div class="subline">
            <span id="aCount">Cさん: –</span>
            <span id="othersCount">Others: –</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Tab 2 -->
    <section id="t2" class="panel" role="tabpanel">
      <div class="card">
        <div class="chart-wrap">
          <canvas id="cumChart"></canvas>
        </div>
        <div class="desc">
          <div>横軸：2026-01-01 を 1日目とした日数</div>
          <div>縦軸：累積回数</div>
        </div>
      </div>
    </section>

    <!-- Tab 3 / 4 -->
    <section id="t3" class="panel" role="tabpanel">
      <div class="card placeholder">③ 準備中</div>
    </section>
    <section id="t4" class="panel" role="tabpanel">
      <div class="card placeholder">④ 準備中</div>
    </section>
  </main>

  <!-- boot marker -->
  <script>
    window.__boot = [];
    window.__mark = (s) => {
      window.__boot.push(s);
      const el = document.getElementById('meta');
      if (el) el.textContent = 'BOOT: ' + window.__boot.join(' > ');
    };
    __mark('inline');
  </script>

  <script src="js/config.js?v=29"></script>
  <script src="js/api.js?v=29"></script>
  <script src="js/main.js?v=29"></script>

  <script>
    document.body.insertAdjacentHTML(
      'afterbegin',
      '<div style="position:fixed;left:8px;top:8px;z-index:9999;background:#000;color:#0f0;padding:6px 8px;border-radius:6px;font:12px monospace;">INLINE JS OK</div>'
    );
  </script>
</body>
</html>
